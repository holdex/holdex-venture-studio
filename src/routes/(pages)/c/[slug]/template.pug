include ../../common-mixins
include ../mixins

+if("storeData")
  +main-section
    +if("!isV2")
      +header-wrapper(class="!mb-0")
        +nav-crumbs
          +crumbItemLink("/", "Holdex")
          +crumbDelimiter
          +crumbItemLink("/c", "Studio")
          +crumbDelimiter
          +crumbItemText("{community.name}")
        +messageHeader("{community.name}", "{community.tagline}")(id="{community.id}")
        +content-wrapper(class="xs:!px-0")
          +if("community.slug !== 'jobs'")
            +filter-options
          +if("community.hashtags && community.hashtags.totalCount > 0")
            ul.hashtags-list(class="flex items-start gap-3 flex-wrap w-full")
              +each("sortHashtags(community.hashtags.edges) as tag (tag.node.id)")
                Hashtag(
                  tag="{'#'}{tag.node.id}"
                  class="{isHashtagActive(pageFilter, tag.node.id)}"
                  onClick!="{() => handleSort($page.url, tag.node.id.toLowerCase())}"
                )
          +feedRenderer
            Feed(
              feedType="{community.slug === 'jobs' ? 'resource' : 'default'}"
              edges="{edges}"
              totalCount="{totalCount}"
              isRefetching="{isRefetching}"
              pageInfo="{pageInfo}"
              loadMore="{loadMore}"
            )
      +else
        +header-wrapper-v2
          +nav-crumbs
            +crumbItemLink("/", "Holdex")
            +crumbDelimiter
            +crumbItemLink("/c", "Studio")
            +crumbDelimiter
            +crumbItemText("{community.name}")
          +if("community.slug === 'jobs'")
            +section-hero-image("/headerPages/jobs.png", "/headerPages/effect.png")
              ArticleHeaderImage(id="{community.id}") 
                | {community.name}
                div(
                  class="smDown:text-paragraph-l smDown:p-1 text-h4-l font-normal text-center mx-auto px-[120px] smDown:px-0"
                ) For passionate enthusiasts who are eager to build our decentralized future!
          +if("community.slug === 'learn'")
            +section-hero-image("/headerPages/learn.png", "/headerPages/effect.png")
              ArticleHeaderImage(id="{community.id}") 
                | {community.name}
                div(
                  class="smDown:text-paragraph-l smDown:p-1 text-h4-l font-normal text-center mx-auto px-[120px] smDown:px-0"
                ) Crypto beginner guides and battle tested knowledge
          +if("isV2")
            +line-break
          +content-wrapper(class="xs:!px-0")
            +if("community.slug !== 'jobs'")
              +filter-options
            +if("community.hashtags && community.hashtags.totalCount > 0")
              ul.hashtags-list(class="flex items-start gap-3 flex-wrap w-full")
                +each("sortHashtags(community.hashtags.edges) as tag (tag.node.id)")
                  Hashtag(
                    tag="{'#'}{tag.node.id}"
                    class="{isHashtagActive(pageFilter, tag.node.id)}"
                    onClick!="{() => handleSort($page.url, tag.node.id.toLowerCase())}"
                  )
            +feedRenderer
              Feed(
                feedType="{community.slug === 'jobs' ? 'resource' : 'default'}"
                edges="{edges}"
                totalCount="{totalCount}"
                isRefetching="{isRefetching}"
                pageInfo="{pageInfo}"
                loadMore="{loadMore}"
              )
